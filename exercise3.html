<!-- Exercise 3
     Student Name: Milim Lee (991274533)
 	 Description: Create a web page using jQuery Mobile and OOP features
-->

<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Exercise 3</title>

    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css" />

    <script src="http://code.jquery.com/jquery-1.11.1.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>

    <script>
        $(document).ready(function(){  

            // literal method to create objects
            var flightLit = {
                flightno : "AC456", 
                capacity : 150, 
                reservedSeats : 125
                };  

               
            $("#litFlight").html("");
            $("#litFlight").append("Flight No : " + flightLit.flightno)
            .append("<br>Capacity : " + flightLit.capacity)
            .append("<br>Reserved Seats : " + flightLit.reservedSeats);  
          
            // Constructor method to create objects
            function Flight (flightno, capacity, reservedSeats){
                this.flightno = flightno;
                this.capacity = capacity;
                this.reservedSeats = reservedSeats;
                this.getInfo = function(){
                    return "Flight number : " + this.flightno + "\nMax capacity : "  + this.capacity + "\nReserved Seats : " + this.reservedSeats;
                };
                this.getBookSeats = function(){
    
                // The method should text that the number of seats booked 
                // does not exceed the capacity of the flight
                                                          
                    var book_now = parseInt($("#num").val());;
                    var book_val = parseInt(reservedSeats);var book_tot = book_now + book_val;   
                    
                if(this.capacity < book_tot) {
                // If the number added to the reserved variable does exceed 
                // the capacity, display an alert message
                  return alert ("OverBooked !!!");
                     
                }     
                else if (this.capacity >= book_tot) {   
                    this.reservedSeats = book_tot;  
                // If the number entered does not exceed the capacity, 
                // increase the reserved variable
                             
                   alert ( this.getInfo());
                }
            }              
        }; 
         
          // Creating flight instances
          var flightObj = new Flight("AC456", 135, 100); 
        
         $("#newObj").html("");
         $("#newObj").append("Flight No : " + flightObj.flightno)
            .append("<br>Capacity : " + flightObj.capacity)
            .append("<br>Reserved Seats : " + flightObj.reservedSeats);  

                $("#finfo").click(function (){
                  flightObj.getBookSeats();
              });         
        
     });
              
    </script>
    <style>
        body {text-align: center; background: skyblue;}
        h2 {color: darkblue;}
    </style>
</head>

<body>    
            <h2> Flight Reservation Information </h2>    
                 <h4 id="litFlight"> </h4>            
            <hr>
            <h2 >New Flight RESV</h2>
            <h4 id="newObj"></h4>
            <h4>How many seats do you want to reserve?<input type="number" id="num" min="1"></span></h4>     
            <button class="ui-btn" id="finfo"> Tap to check your reservation</button>
            
</body>

</html>